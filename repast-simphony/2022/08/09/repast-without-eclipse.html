<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Repast Simphony (almost) without Eclipse</title>
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <meta name="description" content="This is a small guide on how to use Repast Simphony in the Intellij IDEs, which turns out to be quite tricky...">
  </head>
  <body data-bs-spy="scroll" data-bs-target="#navigation" data-bs-offset="10">
    <div><div class="container post-wrapper shadow">
  <div class="d-flex justify-content-end">
    <code class="p-2 mt-2 mb-2">
      <a target="_blank" href="https://beluwi.de" class="text-decoration-none">Benedikt Lüken-Winkels</a>
      <a target="_blank" href="https://github.com/BeneLuWi" class="text-decoration-none">
        <i class="devicon-github-original"></i>
      </a>
      <a target="_blank" href="https://www.xing.com/profile/Benedikt_LuekenWinkels/cv" class="text-decoration-none">
        <i class="fa-brands fa-xing"></i>
      </a>
      <a
        target="_blank"
        href="https://www.linkedin.com/in/benedikt-l%C3%BCken-winkels/"
        class="text-decoration-none"
      >
        <i class="devicon-linkedin-plain"></i>
      </a>
      <a target="_blank" href="mailto:b.lueken.winkels@gmail.com" class="text-decoration-none">
        <i class="fa-solid fa-envelope"></i>
      </a>
    </code>
  </div>

  <h2 class="mt-0">Repast Simphony (almost) without Eclipse</h2>
  <div class="mb-3 mt-3">
    <img src="/assets/images/2022-08-26-repast-without-eclipse/butterfly.jpg" alt="Article Banner Image" class="rounded-0 m-0" />
    <div class="d-flex justify-content-center">
      <small>Photo by <a href="https://unsplash.com/@sandym10?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Sandy Millar</a> on <a href="https://unsplash.com/license?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></small>
    </div>
  </div>
  <p>This project uses the Repast Simphony JZombies Model, taken from the <a href="https://repast.github.io/docs/RepastJavaGettingStarted.pdf">Repast Java Tutorials</a> and shows how to use Repast Simphony (almost) without Eclipse.
This is especially useful, when the model is built in a <code class="language-plaintext highlighter-rouge">ci</code> pipeline or one wants to use another IDE, like Intellij IDEA.</p>

<p>The approach is developed and widely used by the team of the topic field <a href="https://www.dfki.de/en/web/research/research-departments/smart-data-knowledge-services/tf-cognitive-social-simulation">Cognitive Social Simulation</a> of the Research Department Smart Data &amp; Knowledge Services at DFKI.</p>

<h3 id="check-out-the-code"><a href="https://github.com/DFKI/Repast-Simphony-Ant.git">Check out the Code</a></h3>

<h2 id="requirements">Requirements</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/DFKI/Repast-Simphony-Ant.git
</code></pre></div></div>

<p>Install <a href="https://adoptium.net/?variant=openjdk11"><code class="language-plaintext highlighter-rouge">adoptopenjdk11</code></a></p>

<p>To run and build the model, Repast Simphony Runtime Libraries are needed. It is sufficient to just download (and unzip)
the <a href="https://cloud.dfki.de/owncloud/index.php/s/xDgjP748jCcMcKG"><code class="language-plaintext highlighter-rouge">plugins</code> folder</a>. Alternatively you can use your local
installation of Repast Simphony 2.9 .</p>

<ul>
  <li>Note the path to the <code class="language-plaintext highlighter-rouge">plugins</code> folder. For Eclipse under macOS the path can look like<br />
<code class="language-plaintext highlighter-rouge">/Applications/Repast Simphony 2.9.0/Eclipse.app/Contents/Eclipse/</code></li>
  <li>The path has to be build with forward-slashes (<code class="language-plaintext highlighter-rouge">/</code>), on Windows too</li>
</ul>

<h2 id="run-from-command-line">Run from Command Line</h2>

<ul>
  <li>Install <code class="language-plaintext highlighter-rouge">ant</code></li>
  <li>Set the <code class="language-plaintext highlighter-rouge">JAVA_HOME</code> environment variable to your <code class="language-plaintext highlighter-rouge">adoptopenjdk11</code> installation</li>
  <li>
    <p>Clone the Repository</p>
  </li>
  <li>In the project root run:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant build <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span>
ant run-model <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span>
</code></pre></div>    </div>
  </li>
  <li>Example:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant run-model <span class="s2">"-Dplugins_loc=/Applications/Repast Simphony 2.9.0/Eclipse.app/Contents/Eclipse/"</span> <span class="s2">"-Dmodel_loc=./JZombies_Demo.rs"</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="available-targets">Available Targets</h3>

<ul>
  <li>Headless Batch Run as described in https://repast.github.io/docs/RepastBatchRunsGettingStarted.pdf
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant run-batch <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span> <span class="s2">"-Dargs=-hl -r -model_dir [/absolute/path/to/project/root] -b batch/batch_params.xml -o output -c batch_config.properties"</span>
</code></pre></div>    </div>
  </li>
  <li>Build the Model
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant build <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span>
</code></pre></div>    </div>
  </li>
  <li>Debug Model, opening Port 5005 for a Remote JVM Debugging Session
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant debug-model <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span>
</code></pre></div>    </div>
  </li>
  <li>Run the Batch-Runner GUI
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant run-batch <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span>
</code></pre></div>    </div>
  </li>
  <li>Run the Model GUI
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ant run-model <span class="s2">"-Dplugins_loc=[/absolute/path/to/plugins]"</span>  <span class="s2">"-Dmodel_loc=[relative/path/to/model.rs]"</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="run-the-repast-server-as-docker-container">Run the Repast Server as Docker Container</h2>

<p>Reference to Repast Server: https://repast.github.io/docs/RepastNG/browser.html</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up -d --build
</code></pre></div></div>

<p>Go to <code class="language-plaintext highlighter-rouge">http://localhost:5000</code></p>

<ul>
  <li>To run a different Ant Target, like a headless batch run, change the executed <code class="language-plaintext highlighter-rouge">CMD</code> in the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code></li>
</ul>

<h2 id="build-and-run-in-intellij-idea">Build and Run in Intellij IDEA</h2>

<ul>
  <li>Clone the Repository</li>
  <li>Create new project from existing sources and choose import project from external model</li>
</ul>

<p><img src="/assets/images/2022-08-26-repast-without-eclipse/import.png" alt="import" /></p>

<ul>
  <li>Select the <a href="https://github.com/DFKI/Repast-Simphony-Ant/blob/main/build.xml"><code class="language-plaintext highlighter-rouge">build.xml</code></a> file in the project root and set it as <code class="language-plaintext highlighter-rouge">Ant Build File</code> from the context menu</li>
  <li>Open the <code class="language-plaintext highlighter-rouge">Ant View</code> and edit the properties of the <code class="language-plaintext highlighter-rouge">build</code> Ant Target</li>
  <li>Add the <code class="language-plaintext highlighter-rouge">plugins_loc</code> property with the path to the <code class="language-plaintext highlighter-rouge">plugins</code> folder as value</li>
  <li>Add the <code class="language-plaintext highlighter-rouge">model_loc</code> property with the value <code class="language-plaintext highlighter-rouge">./JZombies_Demo.rs</code></li>
</ul>

<p><img src="/assets/images/2022-08-26-repast-without-eclipse/ant-properties.png" alt="ant-properties" /></p>

<ul>
  <li>🔨 Build the Model by executing the <code class="language-plaintext highlighter-rouge">build</code> Ant Target</li>
  <li>🚀 Run the Model by executing one of the <code class="language-plaintext highlighter-rouge">run-*</code> Ant Targets</li>
</ul>

<h3 id="create-a-run-config-recommended">Create a Run Config (recommended)</h3>

<p>Example for <code class="language-plaintext highlighter-rouge">run-model</code>:</p>

<ul>
  <li>In the Context Menu of Ant Target select <code class="language-plaintext highlighter-rouge">Create Run Configuration</code></li>
  <li>In the pop-up at <code class="language-plaintext highlighter-rouge">Before Launch</code> remove the default <code class="language-plaintext highlighter-rouge">Build</code> process and dd the <code class="language-plaintext highlighter-rouge">build</code> Ant Target</li>
</ul>

<p><img src="/assets/images/2022-08-26-repast-without-eclipse/run-config.png" alt="run-config" /></p>

<h3 id="syntax-highlighting-in-intellij">Syntax Highlighting in Intellij</h3>

<p>Under <code class="language-plaintext highlighter-rouge">File &gt; Project Structure &gt; Project Settings &gt; Modules &gt; JZombies_Demo &gt; Dependencies</code></p>

<ul>
  <li>Add the <code class="language-plaintext highlighter-rouge">lib</code> folder in the project root</li>
  <li>Add the <code class="language-plaintext highlighter-rouge">repast.simphony.bin_and_src.jar</code> from the <code class="language-plaintext highlighter-rouge">plugins</code>
folder: <code class="language-plaintext highlighter-rouge">[path_to_plugins]/plugins/repast.simphony.bin_and_src_2.9.0/repast.simphony.bin_and_src.jar</code></li>
</ul>

<p><img src="/assets/images/2022-08-26-repast-without-eclipse/import-module.png" alt="import-module" /></p>

<h3 id="add-a-debugger-">Add a Debugger 🐞</h3>

<ul>
  <li>Create a <code class="language-plaintext highlighter-rouge">Remote JVM Debug</code> run configuration (the default settings should be correct)</li>
  <li>Run the <code class="language-plaintext highlighter-rouge">debug-model</code> Ant Target</li>
  <li>Start the <code class="language-plaintext highlighter-rouge">Debugger</code></li>
</ul>

<p><img src="/assets/images/2022-08-26-repast-without-eclipse/debugger.png" alt="debugger" /></p>

</div>
</div>
    <footer style="margin-bottom: 40px">
      <hr />
      <div class="d-flex justify-content-around p-5">
        <a target="_blank" href="https://github.com/BeneLuWi" class="text-decoration-none display-4">
          <i class="devicon-github-original"></i>
        </a>
        <a
          target="_blank"
          href="https://www.xing.com/profile/Benedikt_LuekenWinkels/cv"
          class="text-decoration-none display-4"
        >
          <i class="fa-brands fa-xing"></i>
        </a>
        <a
          target="_blank"
          href="https://www.linkedin.com/in/benedikt-l%C3%BCken-winkels/"
          class="text-decoration-none display-4"
        >
          <i class="devicon-linkedin-plain"></i>
        </a>
        <a target="_blank" href="mailto:b.lueken.winkels@gmail.com" class="text-decoration-none display-4">
          <i class="fa-solid fa-envelope"></i>
        </a>
      </div>
      <hr />
      <div class="p-3 d-flex justify-content-center">
        <span>Benedikt Lüken-Winkels</span>
      </div>
    </footer>
    <script src="/assets/js/vendor/bootstrap/bootstrap.bundle.min.js"></script>
  </body>
</html>
